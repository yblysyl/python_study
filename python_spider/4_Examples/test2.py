from selenium import webdriver
from selenium.webdriver.common.by import By
import time
from bs4 import BeautifulSoup
import requests
import re
####系统配置
#driver = webdriver.Chrome()   #导入驱动

def get_real_url(v_url):
    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36",
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
        "Accept-Language": "zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7",
        "Connection": "keep-alive",
        "Accept-Encoding": "gzip, deflate, br",
        "Host": "www.baidu.com",
        # 需要更换Cookie
        "Cookie": '__yjs_duid=1_7b49fc15e97b98aa88409cc07e63da5b1633405212352; BIDUPSID=F5FC69633DB6AD42FDBC17CB38EA24EC; PSTM=1633405212; BDSFRCVID=h3LOJexroG0RT0bDD7DqMHDFRgKK0gOTDYLEOwXPsp3LGJLVgxPTEG0PtjJ5HU4bLrA9ogKKBgOTH4FF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tRk8oI0aJDvDqTrP-trf5DCShUFsbPKJB2Q-XPoO3KJWePOPQhjEyPFAQfTLtpTPQRnt_fbgy4op8P3y0bb2DUA1y4vpK55Da2TxoUJ2bUOJfxjJqtnWeMLebPRi3tb9Qg-JKqQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wD5thj6PVKgTa54cbb4o2WbCQ3p7r8pcN2b5oQT8bbpba0p50J6RPKRrEJUclSDbGjlOUWJDkXpJvQnJjt2JxaqRC5KQaDp5jDh3M5hts5RQme4ROfgTy0hvc0J3cShPmQxjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQhDHt8JT-tJJ3aQ5rtKRTffjrnhPF3efC0XP6-hnjy3bRO0-Ot3UQhsDnaQtTVjhIA3HOttq3Ry6r42-39LPO2hpRjyxv4bTKLhPoxJpOJbN7MLfjnHR7Wbh5vbURvL4-g3-AJ0f5dtjTO2bc_5KnlfMQ_bf--QfbQ0hOhqP-jBRIEoD8MJD-5hI0r-R-_-4_tbh_X5-RLf5r0_p7F54nKDp0x0l82-x0v2-ouWxvR3HrMahkM5h7xsMTsQfnbWh8yKabr0MTrQDvObUbN3KJmfbc_jf7lj-DTK4L82-biW2rM2MbdJpQP_IoG2Mn8M4bb3qOpBtQmJeTxoUJ25DnJhhCGe6K5D553DN-fq-jeHDrKBRbaHJOoDDvdDUvcy4LbKxnxJpjntIrRKI3g-l61shQ-bURvD--g3-OkWUQ9babTQ-tbBp3k8MQT2h3xQfbQ0hOBBjQ7QRna2PopfR7JOpvtbUnxy50zQRPH-Rv92DQMVU52QqcqEIQHQT3m5-5bbN3ut6T2-DA__IKKJKQP; H_WISE_SIDS_BFESS=110085_127969_176398_179346_182234_184012_184286_184440_185268_186841_187392_187726_188453_188553_188747_188874_189731_189755_189975_190146_190473_190622_190683_190796_191067_191369_191810_192011_192206_192351_192407_192672_192958_193042_193283_193558_193635_193756_193882_194085_194514_194519_194583_194672_195155_195175_195189_195343_195477_195543_195551_195591_195678_195839_196001_196045_196051_196230_196275_196426_196489_196591_196701_196754_196833_196847_196940_197001_197027_197147_197215_197221_197241_197288_197469_197668_197710_197783_197829_198033_198181_198242_198255_198312_198429_198446_198510_198876_198902_198928; BDUSS=ptSm9oek5KNzFyckNlV3BGVm5CMkVJT2RIZnBRb35ySWdIY0ljSG42NXFWMWRqRVFBQUFBJCQAAAAAAAAAAAEAAAB3YsSO09p5dWJsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGrKL2Nqyi9jSm; BDUSS_BFESS=ptSm9oek5KNzFyckNlV3BGVm5CMkVJT2RIZnBRb35ySWdIY0ljSG42NXFWMWRqRVFBQUFBJCQAAAAAAAAAAAEAAAB3YsSO09p5dWJsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGrKL2Nqyi9jSm; BAIDUID=8DC2797D22188D4D5D0E185554D8133E:FG=1; MCITY=-301:; BD_UPN=12314753; BDSFRCVID_BFESS=h3LOJexroG0RT0bDD7DqMHDFRgKK0gOTDYLEOwXPsp3LGJLVgxPTEG0PtjJ5HU4bLrA9ogKKBgOTH4FF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tRk8oI0aJDvDqTrP-trf5DCShUFsbPKJB2Q-XPoO3KJWePOPQhjEyPFAQfTLtpTPQRnt_fbgy4op8P3y0bb2DUA1y4vpK55Da2TxoUJ2bUOJfxjJqtnWeMLebPRi3tb9Qg-JKqQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0MBCK0hD0wD5thj6PVKgTa54cbb4o2WbCQ3p7r8pcN2b5oQT8bbpba0p50J6RPKRrEJUclSDbGjlOUWJDkXpJvQnJjt2JxaqRC5KQaDp5jDh3M5hts5RQme4ROfgTy0hvc0J3cShPmQxjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQhDHt8JT-tJJ3aQ5rtKRTffjrnhPF3efC0XP6-hnjy3bRO0-Ot3UQhsDnaQtTVjhIA3HOttq3Ry6r42-39LPO2hpRjyxv4bTKLhPoxJpOJbN7MLfjnHR7Wbh5vbURvL4-g3-AJ0f5dtjTO2bc_5KnlfMQ_bf--QfbQ0hOhqP-jBRIEoD8MJD-5hI0r-R-_-4_tbh_X5-RLf5r0_p7F54nKDp0x0l82-x0v2-ouWxvR3HrMahkM5h7xsMTsQfnbWh8yKabr0MTrQDvObUbN3KJmfbc_jf7lj-DTK4L82-biW2rM2MbdJpQP_IoG2Mn8M4bb3qOpBtQmJeTxoUJ25DnJhhCGe6K5D553DN-fq-jeHDrKBRbaHJOoDDvdDUvcy4LbKxnxJpjntIrRKI3g-l61shQ-bURvD--g3-OkWUQ9babTQ-tbBp3k8MQT2h3xQfbQ0hOBBjQ7QRna2PopfR7JOpvtbUnxy50zQRPH-Rv92DQMVU52QqcqEIQHQT3m5-5bbN3ut6T2-DA__IKKJKQP; ispeed_lsm=2; BD_HOME=1; BD_CK_SAM=1; PSINO=1; delPer=0; BA_HECTOR=al00052g81810ha4ag8h210u1i1vr731m; BAIDUID_BFESS=8DC2797D22188D4D5D0E185554D8133E:FG=1; ZFY=xWfWeO2SFe18S9HUVHb7LIRz2C5:A1CFaj7AaogtvT6U:C; BDRCVFR[feWj1Vr5u3D]=mk3SLVN4HKm; B64_BOT=1; H_PS_PSSID=38185_36552_38359_38468_38173_38290_38375_37933_38343_37900_26350_38419_38282_37881; baikeVisitId=f617168d-1433-41b3-ac67-1630430ed1ad; RT="z=1&dm=baidu.com&si=f61158db-79bb-4f93-a08a-e2b503a11f7e&ss=lfp2rcq8&sl=1&tt=3lr&bcn=https://fclog.baidu.com/log/weirwood?type=perf&ld=4eh"; H_PS_645EC=be74WiwNjxi3T3TXASHd4B94uztc699kK4d6/qRxBYOUVif969oXW6qFjabw+OxdX/DK'
    } 
    try:
        r = requests.get(v_url, headers=headers)  # 不允许重定向
        print(r)#输出为文本
        print(r.headers)#输出为文本
        print(r.raw(10))#输出为文本
        print(r.text)#输出为文本
        print(r.encoding)#输出编码 utf-8
        print(r.content)#获取字节响应内容
        print(r.status_code) #获取响应码
    except Exception as e:
        return "地址错误"

##主方法
if __name__ == '__main__':
    get_real_url('https://www.baidu.com/s?wd=%E6%96%B0%E5%86%A0&rsv_spt=1&rsv_iqid=0x99ff20820000ef63&issp=1&f=8&rsv_bp=1&rsv_idx=2&ie=utf-8&rqlang=cn&tn=baiduhome_pg&rsv_enter=1&rsv_dl=tb&oq=2022%25E7%2594%25B5%25E8%25A7%2586%25E5%2589%25A7%25E8%25B1%2586%25E7%2593%25A3%25E6%258E%2592%25E8%25A1%258C%25E6%25A6%259C%25E5%2589%258D%25E5%258D%2581%25E5%2590%258D&rsv_btype=t&inputT=1437066&rsv_t=fbb9vGOW5heFLwDjyDingADAL%2FHFGXRmc217i3mcSOyRVQFD6LKuJ3jNdJg&rsv_pq=82c1b452001751a2&rsv_sug3=34&rsv_sug1=23&rsv_sug7=100&rsv_sug2=0&rsv_sug4=1437066')